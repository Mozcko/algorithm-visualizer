---
import Sidebar from '../components/common/Sidebar.astro';
import '../../styles/global.css'

interface Props {
  title: string;
  currentAlgoId?: string;
}

const { title, currentAlgoId } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} | AlgoVisualizer</title>
  </head>
  <body class="bg-slate-950 text-slate-200 antialiased selection:bg-blue-500/30">
    <div class="flex h-screen overflow-hidden relative">
      
      <div 
        id="mobile-overlay" 
        class="fixed inset-0 bg-black/60 z-40 hidden transition-opacity md:hidden backdrop-blur-sm"
        aria-hidden="true"
      ></div>

      <Sidebar currentId={currentAlgoId} />
      
      <main class="flex-1 overflow-y-auto relative flex flex-col w-full">
        <header class="md:hidden flex items-center justify-between p-4 border-b border-slate-800 bg-slate-900/50 backdrop-blur sticky top-0 z-30">
          <div class="font-bold text-white tracking-wider">ALGO_VISUALIZER</div>
          <button 
            id="menu-toggle" 
            class="p-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors"
            aria-label="Toggle Menu"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </header>

        <slot />
      </main>
    </div>

    <script>
      const menuBtn = document.getElementById('menu-toggle');
      const overlay = document.getElementById('mobile-overlay');
      const sidebar = document.getElementById('app-sidebar');

      function toggleMenu() {
        // Toggle the translate class to slide sidebar in/out
        sidebar?.classList.toggle('-translate-x-full');
        // Toggle overlay visibility
        overlay?.classList.toggle('hidden');
      }

      menuBtn?.addEventListener('click', toggleMenu);
      overlay?.addEventListener('click', toggleMenu);
    </script>
  </body>
</html>